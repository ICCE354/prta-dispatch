<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PRTA Driver MDT</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ===== GLOBAL ===== */
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:#020617;
  color:#e5e7eb;
  user-select:none;
}
.page{display:none;padding:12px}
button{
  width:100%;
  padding:12px;
  font-size:15px;
  border-radius:8px;
  border:1px solid #1f2937;
  background:#1e40af;
  color:white;
  font-weight:bold;
}
button:active{transform:scale(0.97)}
.hidden{display:none}

/* ===== TOP BAR (MATCHED) ===== */
#topBar{
  display:grid;
  grid-template-columns:1fr 1fr 1fr auto;
  gap:6px;
  align-items:center;
  background:#0b1220;
  border-bottom:2px solid #2563eb;
  padding:8px 10px;
  font-size:13px;
}
.topBox{
  background:#020617;
  border:1px solid #1f2937;
  padding:6px;
  text-align:center;
  font-weight:bold;
}

/* ===== HOME GRID (TRAPEZE STYLE) ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin-top:14px;
}
.tile{
  height:92px;
  background:#020617;
  border:2px solid #1f2937;
  border-radius:10px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}
.tile span{font-size:26px}
.tile small{margin-top:6px;font-size:12px}

/* ===== TABLE ===== */
table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th,td{
  border:1px solid #1f2937;
  padding:8px;
  text-align:center;
  font-size:14px;
}
th{background:#0b1220}

/* ===== BOTTOM LATE BAR ===== */
#lateBar{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  padding:12px;
  font-size:18px;
  font-weight:bold;
  text-align:center;
}
.onTime{background:#064e3b}
.warn{background:#92400e}
.late{background:#7f1d1d}

/* ===== BACK BUTTON ===== */
.backBtn{
  margin-bottom:8px;
  background:#020617;
}
</style>
</head>

<body>

<!-- ===== TOP STATUS BAR ===== -->
<div id="topBar">
  <div class="topBox">BUS <span id="bus">4172</span></div>
  <div class="topBox">ROUTE <span id="route">1</span></div>
  <div class="topBox">RUN <span id="run">302</span></div>
  <div class="topBox" id="clock">--:--</div>
</div>

<!-- ===== HOME ===== -->
<div id="home" class="page" style="display:block">
  <div class="grid">

    <div class="tile" onclick="show('rtt')">
      <span>üìª</span><small>RTT</small>
    </div>

    <div class="tile" onclick="show('schedule')">
      <span>üìã</span><small>Schedule</small>
    </div>

    <div class="tile" onclick="show('annc')">
      <span>üì¢</span><small>ANNC</small>
    </div>

    <div class="tile" onclick="show('count')">
      <span>üë•</span><small>Passengers</small>
    </div>

    <div class="tile">
      <span>‚öôÔ∏è</span><small>Setup</small>
    </div>

    <div class="tile">
      <span>üõ†Ô∏è</span><small>Maintenance</small>
    </div>

    <div class="tile" onclick="logout()">
      <span>üö™</span><small>Log Out</small>
    </div>

  </div>
</div>

<!-- ===== RTT ===== -->
<div id="rtt" class="page">
  <button class="backBtn" onclick="goHome()">‚¨Ö HOME</button>
  <button>Running Late</button>
  <button>Traffic Delay</button>
  <button>Mechanical Issue</button>
  <button>Customer Declined Shoulder Strap</button>
  <button>Operator Assistance Requested</button>
</div>

<!-- ===== SCHEDULE ===== -->
<div id="schedule" class="page">
  <button class="backBtn" onclick="goHome()">‚¨Ö HOME</button>
  <table id="schedTable"></table>
</div>

<!-- ===== PASSENGERS ===== -->
<div id="count" class="page">
  <button class="backBtn" onclick="goHome()">‚¨Ö HOME</button>
  <button onclick="boarded++">Board +1</button>
  <button onclick="alighted++">Alight +1</button>
  <p>Boarded: <span id="b">0</span></p>
  <p>Alighted: <span id="a">0</span></p>
  <p>Onboard: <span id="o">0</span></p>
</div>

<!-- ===== ANNOUNCEMENTS ===== -->
<div id="annc" class="page">
  <button class="backBtn" onclick="goHome()">‚¨Ö HOME</button>
  <button>Please move to the rear of the bus</button>
  <button>Night safety message</button>
  <button>Do not talk to operator</button>
  <button>Accessible seating reminder</button>
</div>

<!-- ===== BOTTOM BAR ===== -->
<div id="lateBar" class="onTime">ON TIME</div>

<script>
/* ===== NAV ===== */
function show(id){
  document.querySelectorAll('.page').forEach(p=>p.style.display='none');
  document.getElementById(id).style.display='block';
}
function goHome(){show('home')}
function logout(){alert("Logged out")}

/* ===== CLOCK ===== */
setInterval(()=>{
  const d=new Date();
  clock.innerText=d.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
},1000);

/* ===== PASSENGERS ===== */
let boarded=0, alighted=0;
setInterval(()=>{
  b.innerText=boarded;
  a.innerText=alighted;
  o.innerText=Math.max(0,boarded-alighted);
},500);

/* ===== REAL SCHEDULE DATA ===== */
let trip = [
  {stop:"Terminal", time:"15:30", arrived:false},
  {stop:"Main St", time:"15:45", arrived:false},
  {stop:"Depot", time:"16:00", arrived:false}
];

/* ===== RENDER SCHEDULE ===== */
function renderSchedule(){
  schedTable.innerHTML="<tr><th>Stop</th><th>Time</th><th>Status</th></tr>";
  trip.forEach((p,i)=>{
    const r=schedTable.insertRow();
    r.insertCell().innerText=p.stop;
    r.insertCell().innerText=p.time;
    r.insertCell().innerHTML=p.arrived
      ? "Arrived"
      : `<button onclick="arrive(${i})">Arrived</button>`;
  });
}
renderSchedule();

/* ===== ARRIVE ===== */
function arrive(i){
  trip[i].arrived=true;
  renderSchedule();
  if(trip.every(p=>p.arrived)){
    trip=[];
    schedTable.innerHTML="<tr><td colspan='3'>No Active Trip</td></tr>";
    lateBar.innerText="ON TIME";
    lateBar.className="onTime";
  }
}

/* ===== REAL LATENESS CALC ===== */
setInterval(()=>{
  const next = trip.find(p=>!p.arrived);
  if(!next){
    lateBar.innerText="ON TIME";
    lateBar.className="onTime";
    return;
  }
  const [h,m]=next.time.split(":").map(Number);
  const sched=new Date(); sched.setHours(h,m,0,0);
  const diff=Math.round((new Date()-sched)/60000);

  if(diff<=0){
    lateBar.className="onTime";
    lateBar.innerText="ON TIME";
  }else if(diff<=2){
    lateBar.className="warn";
    lateBar.innerText=`LATE ${diff} MIN`;
  }else{
    lateBar.className="late";
    lateBar.innerText=`LATE ${diff} MIN`;
  }
},30000);
</script>

</body>
</html>



