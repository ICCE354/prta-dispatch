<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Driver MDT</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --baby:#9ad1ff;
  --dark:#0b2c6d;
  --btn:#123c8a;
  --border:#7dd3fc;
  --white:#f8fafc;
  --red:#b91c1c;
  --green:#15803d;
}

*{box-sizing:border-box}

body{
  margin:0;
  background:var(--baby);
  font-family:Arial, Helvetica, sans-serif;
  color:var(--white);
}

/* ================= TOP BAR ================= */
.topbar{
  display:flex;
  gap:10px;
  padding:10px;
  z-index:10;
  position:relative;
}
.topbtn{
  flex:1;
  background:var(--btn);
  border:2px solid var(--border);
  border-radius:6px;
  padding:12px;
  text-align:center;
  font-weight:bold;
  cursor:pointer;
  pointer-events:auto;
}

/* ================= MAIN ================= */
.main{
  display:flex;
  height:calc(100vh - 110px);
}

/* ================= LEFT ================= */
.left{
  width:220px;
  padding:10px;
  display:flex;
  flex-direction:column;
  gap:10px;
  z-index:5;
}
.leftbtn{
  background:var(--btn);
  border:2px solid var(--border);
  border-radius:8px;
  padding:18px;
  text-align:center;
  font-weight:bold;
  cursor:pointer;
  pointer-events:auto;
}

/* ================= CENTER ================= */
.center{
  flex:1;
  padding:10px;
  z-index:1;
}

/* ================= PANELS ================= */
.panel{
  display:none;
  height:100%;
  background:var(--dark);
  border:2px solid var(--border);
  border-radius:12px;
  padding:10px;
}
.panel.active{
  display:block;
}

/* ================= TABLE ================= */
table{
  width:100%;
  border-collapse:collapse;
}
th,td{
  border:1px solid var(--border);
  padding:8px;
  text-align:center;
}
th{background:var(--btn)}

.arriveBtn{
  padding:8px;
  width:100%;
  background:#1d4ed8;
  border:1px solid var(--border);
  color:white;
  font-weight:bold;
  border-radius:4px;
  cursor:pointer;
  pointer-events:auto;
}

/* ================= FOOTER ================= */
.footer{
  height:40px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0 12px;
  font-weight:bold;
  background:var(--green);
}
.footer.late{background:var(--red)}
</style>
</head>

<body>

<!-- TOP -->
<div class="topbar">
  <div class="topbtn" onclick="showPanel('schedulePanel')">HOME</div>
  <div class="topbtn" onclick="showPanel('rttPanel')">RTT</div>
  <div class="topbtn" onclick="showPanel('msgPanel')">MSG</div>
  <div class="topbtn" onclick="showPanel('anncPanel')">ANNC</div>
  <div class="topbtn" onclick="showPanel('menuPanel')">MENU</div>
</div>

<!-- MAIN -->
<div class="main">

  <!-- LEFT -->
  <div class="left">
    <div class="leftbtn" onclick="showPanel('schedulePanel')">HEADSIGN</div>
    <div class="leftbtn" onclick="showPanel('msgPanel')">CARD INFO</div>
    <div class="leftbtn" onclick="showPanel('menuPanel')">SETUP</div>
    <div class="leftbtn" onclick="showPanel('menuPanel')">MAINT</div>
    <div class="leftbtn" onclick="alert('Shift Started')">START SHIFT</div>
    <div class="leftbtn" onclick="alert('Logged Out')">LOG OUT</div>
  </div>

  <!-- CENTER -->
  <div class="center">

    <!-- SCHEDULE -->
    <div id="schedulePanel" class="panel active">
      <h2 style="text-align:center">SCHEDULE</h2>
      <table id="sched"></table>
    </div>

    <!-- RTT -->
    <div id="rttPanel" class="panel">
      <h2>RTT â€“ Two Way Radio</h2>
      <button class="arriveBtn" onclick="alert('Dispatch Called')">
        Call Dispatch
      </button>
    </div>

    <!-- MSG -->
    <div id="msgPanel" class="panel">
      <h2>Messages</h2>
      <p>No new messages.</p>
    </div>

    <!-- ANNOUNCEMENTS -->
    <div id="anncPanel" class="panel">
      <h2>Announcements</h2>
      <button class="arriveBtn">Move to rear of bus</button>
      <button class="arriveBtn">Do not talk to operator</button>
      <button class="arriveBtn">Accessible seating reminder</button>
    </div>

    <!-- MENU -->
    <div id="menuPanel" class="panel">
      <h2>System Menu</h2>
      <p>All systems operational</p>
    </div>

  </div>
</div>

<!-- FOOTER -->
<div id="footer" class="footer">
  <div id="statusText">SYSTEMS OK</div>
  <div id="clock"></div>
</div>

<script>
/* CLOCK */
function updateClock(){
  clock.innerText = new Date().toLocaleTimeString([],{
    hour:'2-digit',minute:'2-digit'
  });
}
setInterval(updateClock,1000); updateClock();

/* PANEL SWITCH */
function showPanel(id){
  document.querySelectorAll(".panel").forEach(p=>p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* SCHEDULE */
const scheduleData = [
  { stop:"Main St", time:"08:30", arrived:false },
  { stop:"Broadway", time:"08:42", arrived:false }
];

function renderSchedule(){
  const t = document.getElementById("sched");
  t.innerHTML = `<tr><th>STOP</th><th>TIME</th><th>STATUS</th></tr>`;
  scheduleData.forEach((s,i)=>{
    const r=t.insertRow();
    r.insertCell().innerText=s.stop;
    r.insertCell().innerText=s.time;
    const c=r.insertCell();
    c.innerHTML = s.arrived
      ? s.status
      : `<button class="arriveBtn" onclick="arrive(${i})">ARRIVED</button>`;
  });
}

function arrive(i){
  const s=scheduleData[i];
  const now=new Date();
  const [h,m]=s.time.split(":").map(Number);
  const sched=new Date(); sched.setHours(h,m,0,0);
  const diff=Math.round((now-sched)/60000);
  s.arrived=true;
  s.status = diff>1 ? `LATE +${diff} MIN` :
             diff<-1 ? `EARLY ${Math.abs(diff)} MIN` : "ON TIME";
  renderSchedule();
  updateFooter();
}

function updateFooter(){
  const next=scheduleData.find(s=>!s.arrived);
  if(!next){
    footer.classList.remove("late");
    statusText.innerText="TRIP COMPLETE";
    return;
  }
  const [h,m]=next.time.split(":").map(Number);
  const sched=new Date(); sched.setHours(h,m,0,0);
  const diff=Math.round((new Date()-sched)/60000);
  if(diff>1){
    footer.classList.add("late");
    statusText.innerText=`LATE ${diff} MIN`;
  }else{
    footer.classList.remove("late");
    statusText.innerText="SYSTEMS OK";
  }
}

renderSchedule();
setInterval(updateFooter,5000);
</script>

</body>
</html>
