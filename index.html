<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Driver MDT</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ====== COLORS (Matched to Trapeze look) ====== */
:root{
  --bg:#071226;
  --panel:#0b1e3d;
  --border:#1e88ff;
  --btn:#0e2f66;
  --btnText:#eaf2ff;
  --grey:#7a7f87;
  --green:#0a5f3b;
  --red:#7a1f1f;
  --yellow:#8a6b00;
}

*{box-sizing:border-box;font-family:Segoe UI,Arial}
body{
  margin:0;
  background:var(--bg);
  color:white;
}

/* ====== TOP BAR ====== */
.topbar{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:20px;
  padding:10px;
  border-bottom:2px solid var(--border);
}
.topbtn{
  border:2px solid var(--border);
  background:var(--btn);
  padding:12px;
  text-align:center;
  font-weight:600;
  border-radius:6px;
  cursor:pointer;
}

/* ====== LAYOUT ====== */
.main{
  display:grid;
  grid-template-columns:220px 1fr 260px;
  height:calc(100vh - 120px);
}

/* ====== LEFT MENU ====== */
.left{
  padding:10px;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.leftbtn{
  border:2px solid var(--border);
  background:#081a36;
  padding:20px;
  text-align:center;
  border-radius:10px;
  cursor:pointer;
}

/* ====== CENTER PANEL ====== */
.center{
  padding:15px;
  border-left:2px solid var(--border);
  border-right:2px solid var(--border);
}
.panel{
  border:2px solid var(--border);
  border-radius:10px;
  padding:15px;
  height:100%;
}

/* ====== AUDIO PANEL ====== */
.audio-btn{
  border:2px solid var(--border);
  padding:14px;
  margin:10px 0;
  text-align:center;
  border-radius:8px;
}
.audio-yellow{background:var(--yellow)}
.audio-blue{background:#0f3c88}
.audio-green{background:#0b6b43}
.audio-red{background:#8b1e1e}

/* ====== RIGHT SCHEDULE ====== */
.schedule{
  background:var(--grey);
  color:black;
  padding:10px;
}
.stop{
  background:white;
  margin-bottom:8px;
  padding:8px;
  border-radius:6px;
  font-size:14px;
}
.stop button{
  margin-top:5px;
  width:100%;
}

/* ====== BOTTOM STATUS ====== */
.statusbar{
  height:50px;
  background:var(--green);
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 15px;
  font-weight:600;
}
.status-late{background:var(--red)}
.status-early{background:#124a9c}

/* ====== HIDDEN ====== */
.hidden{display:none}
</style>
</head>

<body>

<!-- ===== TOP BAR ===== -->
<div class="topbar">
  <div class="topbtn" onclick="showMode('audio')">RTT</div>
  <div class="topbtn" onclick="showMode('msg')">MSG</div>
  <div class="topbtn" onclick="showMode('audio')">ANNC</div>
  <div class="topbtn" onclick="showMode('menu')">MENU</div>
  <div class="topbtn" onclick="showMode('home')">HOME</div>
</div>

<!-- ===== MAIN ===== -->
<div class="main">

  <!-- LEFT -->
  <div class="left">
    <div class="leftbtn">HEADSIGN</div>
    <div class="leftbtn">CARD INFO</div>
    <div class="leftbtn">SETUP</div>
    <div class="leftbtn">MAINT</div>
    <div class="leftbtn">START SHIFT</div>
    <div class="leftbtn">LOG OUT</div>
  </div>

  <!-- CENTER -->
  <div class="center">
    <div class="panel" id="audioPanel">
      <h3 style="text-align:center">AUDIO</h3>
      <div class="audio-btn audio-yellow">HALT ANNOUNCE</div>
      <div class="audio-btn audio-blue">EXT SPKR</div>
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px">
        <div class="audio-btn audio-green">ON</div>
        <div class="audio-btn audio-red">OFF</div>
        <div class="audio-btn audio-blue">LOOP</div>
      </div>
    </div>

    <div class="panel hidden" id="msgPanel">
      <h3>Messages</h3>
      <p>(Placeholder)</p>
    </div>

    <div class="panel hidden" id="menuPanel">
      <h3>Menu</h3>
    </div>
  </div>

  <!-- RIGHT SCHEDULE -->
  <div class="schedule" id="schedulePanel">
    <h3 style="text-align:center">SCHEDULE</h3>
  </div>

</div>

<!-- ===== STATUS BAR ===== -->
<div class="statusbar" id="statusBar">
  <span id="statusText">SYSTEMS OK</span>
  <span id="clock"></span>
</div>

<script>
/* ===== DEMO SCHEDULE ===== */
let schedule = [
  {stop:"Terminal", time:"20:30", arrived:false},
  {stop:"Main St", time:"20:40", arrived:false},
  {stop:"Depot", time:"20:55", arrived:false}
];

/* ===== UI ===== */
function showMode(mode){
  audioPanel.classList.add("hidden");
  msgPanel.classList.add("hidden");
  menuPanel.classList.add("hidden");
  if(mode==="audio") audioPanel.classList.remove("hidden");
  if(mode==="msg") msgPanel.classList.remove("hidden");
  if(mode==="menu") menuPanel.classList.remove("hidden");
}

/* ===== SCHEDULE RENDER ===== */
function renderSchedule(){
  schedulePanel.innerHTML="<h3 style='text-align:center'>SCHEDULE</h3>";
  schedule.forEach((s,i)=>{
    const d=document.createElement("div");
    d.className="stop";
    d.innerHTML=`
      <b>${s.stop}</b><br>
      ${s.time}<br>
      ${s.arrived?"âœ” Arrived":`<button onclick="arrive(${i})">Arrived</button>`}
    `;
    schedulePanel.appendChild(d);
  });
}

/* ===== ARRIVAL ===== */
function arrive(i){
  schedule[i].arrived=true;
  if(schedule.every(s=>s.arrived)){
    schedule=[];
    schedulePanel.innerHTML="<h3>NO ACTIVE TRIP</h3>";
  }
  renderSchedule();
}

/* ===== LATENESS CALC ===== */
function updateStatus(){
  const now=new Date();
  clock.innerText=now.toLocaleTimeString();

  const next=schedule.find(s=>!s.arrived);
  if(!next){
    statusText.innerText="SYSTEMS OK";
    statusBar.className="statusbar";
    return;
  }

  const [h,m]=next.time.split(":").map(Number);
  const sched=new Date();
  sched.setHours(h,m,0,0);
  const diff=Math.round((now-sched)/60000);

  if(diff>1){
    statusText.innerText=`LATE ${diff} MIN`;
    statusBar.className="statusbar status-late";
  }else if(diff<-1){
    statusText.innerText=`EARLY ${Math.abs(diff)} MIN`;
    statusBar.className="statusbar status-early";
  }else{
    statusText.innerText="ON TIME";
    statusBar.className="statusbar";
  }
}

/* ===== INIT ===== */
renderSchedule();
setInterval(updateStatus,1000);
</script>

</body>
</html>


